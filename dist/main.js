(()=>{"use strict";const e=new class{constructor(){this.showSpinner=this.showSpinner.bind(this),this.listCities=this.listCities.bind(this),this.filterCities=this.filterCities.bind(this)}showSpinner(e){document.querySelector(".spinner-border").setAttribute("class","spinner-border "+(1==e?"d-flex":"d-none"))}filterCities(e){return new Promise(((t,i)=>t(this.cities.map((({id:t,name:i})=>i.toLowerCase().startsWith(e.toLowerCase())?{id:t,name:i}:"fail")).filter((e=>"fail"!==e)))))}async listCities(e){let t=document.querySelector(".search-city").value;if(t){this.showSpinner(!0);let e=document.querySelector(".message");e.setAttribute("class","message d-flex"),e.innerHTML="Reading cities file";const i=await fetch("city.list.min.json");e.innerHTML="File read, transforming in json",this.cities=await i.json();const s=document.querySelector(".cities");e.innerHTML="Fetching cities",e.setAttribute("class","message d-none"),this.cities=await this.filterCities(t),s.innerHTML="",await this.cities.forEach((function({id:e,name:t}){let i=document.createElement("li"),n=document.createElement("a");n.setAttribute("id",e),n.setAttribute("class","dropdown-item"),n.setAttribute("href","#"),n.innerText=t,i.appendChild(n),s.appendChild(i)})),document.querySelector(".select-cities").setAttribute("class","dropdown select-cities d-flex"),this.showSpinner(!1)}}};document.querySelector(".submit-city").addEventListener("click",e.listCities,!1)})();